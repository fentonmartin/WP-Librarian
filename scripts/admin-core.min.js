var notificationCount=0;var WP_LIB_NONCE='wp_lib_ajax_nonce';wp_lib_vars.onClick='wp_lib_click_button(this)';jQuery(function(a){window.notificationHolder=jQuery('#wp-lib-notifications');});function wp_lib_collect_form_params(a){var b=jQuery(a).closest('form').serializeArray();var c={};b.forEach(function(a){if(a.hasOwnProperty('name')&&a.hasOwnProperty('value')&&a.value!='')c[a.name]=a.value;});return c;}function wp_lib_add_notification(a){if(typeof window.wp_lib_notification_buffer==='undefined')window.wp_lib_notification_buffer=[];window.wp_lib_notification_buffer.push(a);}function wp_lib_fetch_local_notifications(){if(typeof window.wp_lib_notification_buffer!='undefined'){var a=window.wp_lib_notification_buffer;delete window.wp_lib_notification_buffer;return a;}return [];}function wp_lib_display_local_notifications(){wp_lib_render_notifications(wp_lib_fetch_local_notifications());}function wp_lib_render_notifications(a){a.forEach(function(a){wp_lib_render_notification(a);});}function wp_lib_render_notification(a){var b=wp_lib_format_notification(a);if(a[0]!=0&&typeof console!=='undefined')console.log(b[2]);notificationHolder.append(b[1]).hide().fadeIn(500);var c=jQuery('.'+b[0]);var d=a[1].length*150;if(d<3500)d=3500;else if(d>7000)d=9000;setTimeout(function(){wp_lib_hide_notification(c);},d);}function wp_lib_local_notification(a){wp_lib_render_notification([0,a]);}function wp_lib_local_error(a){wp_lib_render_notification([1,a]);}function wp_lib_format_notification(a){var b='wp_lib_nid_'+notificationCount++;var c=b+' ';var d='';var e='';if(a[0]==0){c+='wp-lib-notification updated';d=a[1];}else if(a[0]==1){c+='wp-lib-error error';e='WP-Librarian Error: '+a[1];d='<strong style="color: red;">'+e+'</strong>';}else{c+='wp-lib-error error';e='WP-Librarian Error '+a[0]+': '+a[1];d='<strong style="color: red;">'+e+'</strong>';}return [b,'<div onclick="wp_lib_hide_notification(this)" class="'+c+'"><p>'+d+'</p></div>',e];}function wp_lib_hide_notification(a){var b=jQuery(a);b.fadeOut("fast");b.remove();}function wp_lib_click_button(a){location.href=jQuery(a).attr('href');}function wp_lib_parse_json(a){try{var b=JSON.parse(a);}catch(c){wp_lib_local_error("Server returned invalid response");if(wp_lib_vars.debugMode==='1')jQuery('<div/>',{'style':'background:grey;','html':'<strong style="color:red;">Server Response</strong></br/>'+a}).appendTo('#wp-lib-workspace');b=0;}return b;}function wp_lib_send_ajax(a,b){if(typeof c==='undefined')var c=false;var d=[];jQuery.post(ajaxurl,a).done(function(a){if(a==='0'){wp_lib_local_error("WordPress AJAX action invalid, most likely a permissions issue.");d[0]=1;return;}else{var b=wp_lib_parse_json(a);if(b===0||!(b instanceof Array))d[0]=2;else if(b[0]===true)d=[4,b];else d=[3,b];}}).fail(function(){wp_lib_local_error('Unable to contact '+wp_lib_vars.siteName+'. The website may be down or you may be having connection issues.');d[0]=0;}).always(function(a){if(typeof b==='function')b(d);var c=wp_lib_fetch_local_notifications();if(d[0]>=3)c=c.concat(d[1][1]);wp_lib_render_notifications(c);});}function wp_lib_init_object(a){elementObject={};jQuery(['id','name','value','html','title','href']).each(function(b,c){if(c in a)elementObject[c]=a[c];});return elementObject;}
